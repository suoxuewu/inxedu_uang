<!DOCTYPE html>
<html lang="zh-CN" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="stylesheet" href="style/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="style/css/font-awesome.min.css">
    <link rel="stylesheet" href="style/css/main.css">
    <link rel="stylesheet" type="text/css" href="webuploader/webuploader.css">

    <style>
        .tree li {
            list-style-type: none;
            cursor: pointer;
        }

        table tbody tr:nth-child(odd) {
            background: #F4F4F4;
        }

        table tbody td:nth-child(even) {
            color: #C00;
        }

        .demo-input {
            font-size: 12px;
            padding-left: 10px;
            height: 36px;
            min-width: 85px;
            line-height: 36px;
            border: 1px solid #ccc;
            background-color: #fff;
            border-radius: 5px;
        }

        .demo-footer a {
            padding: 0 5px;
            color: #01AAED;
        }
        .webuploader-pick{
            background-color: #91989a;
        }

    </style>
</head>

<body>

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <div><a class="navbar-brand" style="font-size:32px;" href="#">XXXX - 学员维护</a></div>
        </div>

    </div>
</nav>

<div class="container-fluid">
    <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
            <div class="tree">
                <ul style="padding-left:0px;" class="list-group">
                    <li class="list-group-item tree-closed">
                        <a href="main.html"><i class="glyphicon glyphicon-dashboard"></i> 控制面板</a>
                    </li>
                    <li class="list-group-item tree-closed">
                        <span><i class="glyphicon glyphicon glyphicon-tasks"></i> 学员管理 <span class="badge"
                                                                                             style="float:right">1</span></span>
                        <ul style="margin-top:10px;display:none;">
                            <li style="height:30px;">
                                <a href="/user"><i class="glyphicon glyphicon-user"></i> 学员列表</a>
                            </li>
                            <li style="height:30px;">
                                <a href="/batchUser"><i class="glyphicon glyphicon-user"></i> 批量添加</a>
                            </li>

                        </ul>
                    </li>
                    <li class="list-group-item tree-closed">
                        <span><i class="glyphicon glyphicon glyphicon-tasks"></i> 教师管理 <span class="badge" style="float:right">2</span></span>
                        <ul style="margin-top:10px;display:none;">
                            <li style="height:30px;">
                                <a href="/teacher"><i class="glyphicon glyphicon-user"></i> 教师列表</a>
                            </li>
                            <li style="height:30px;">
                                <a href="/addTeacher"><i class="glyphicon glyphicon-user"></i> 添加列表</a>
                            </li>

                        </ul>
                    </li>
                    <li class="list-group-item tree-closed">
                        <span><i class="glyphicon glyphicon glyphicon-tasks"></i> 专业管理 <span class="badge" style="float:right">1</span></span>
                        <ul style="margin-top:10px;display:none;">
                            <li style="height:30px;">
                                <a href="/subject"><i class="glyphicon glyphicon-user"></i> 专业列表</a>
                            </li>

                        </ul>
                    </li>
                    <li class="list-group-item tree-closed">
                        <span><i class="glyphicon glyphicon glyphicon-tasks"></i> 课程管理 <span class="badge" style="float:right">2</span></span>
                        <ul style="margin-top:10px;display:none;">
                            <li style="height:30px;">
                                <a href="/eduCourse"><i class="glyphicon glyphicon-user"></i> 课程列表</a>
                            </li>
                            <li style="height:30px;">
                                <a href="/addCourse"><i class="glyphicon glyphicon-user"></i> 课程添加</a>
                            </li>

                        </ul>
                    </li>

                </ul>
            </div>
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title"><i class="glyphicon glyphicon-th"></i>批量开通</h3>
                </div>
                <div class="panel-body">
                     <h4>Excel模版说明:</h4>
                      <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第一列:用户名的电子邮箱必须是未注册过的</p>
                      <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第二列:用户的手机号</p>
                      <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第三列:密码 如不填写默认111111 密码中不能包含非法字符例如:" #</p>
                    <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第四列:赠送课程ID(<span><a href="downloadExcel" style="color: red">点击下载模版</a></span>)</p>
                    <h4>文件上传:</h4>
                    <div id="uploader" class="wu-example" style="margin-left: 30px;">

                        <div class="btns" >
                            <!--用来存放文件信息-->
                            <div id="thelist" class="uploader-list"></div>
                            <button id="ctlBtn" class="btn btn-default" th:onclick="'javascript:uploadExcel()'">开始上传</button>
                            <div id="picker" style="margin-top:10px;color: #a5acaf">选择文件</div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="style/jquery/jquery-2.1.1.min.js"></script>
<script src="style/bootstrap/js/bootstrap.min.js"></script>
<script src="style/script/docs.min.js"></script>
<script src="/laydate/laydate.js"></script>
<script src="style/bootstrap/js/bootstrap-paginator.min.js"></script>
<script type="text/javascript" src="webuploader/webuploader.js" ></script>
<script type="text/javascript">
    $(function () {
        $(function () {
            $(".list-group-item").click(function(){
                if ( $(this).find("ul") ) {
                    $(this).toggleClass("tree-closed");
                    if ( $(this).hasClass("tree-closed") ) {
                        $("ul", this).hide("fast");
                    } else {
                        $("ul", this).show("fast");
                    }
                }
            });
        });


    });
    function selectedFile() {
        //触发文件选择的onclik事件
        $("#file").trigger("click");
    }
    function uploadExcel() {
        uploader.upload();
    }
    var uploader = WebUploader.create({

        // swf文件路径
        swf: '/webuploader/Uploader.swf',

        // 文件接收服务端。
        server: '/uploadExcel',

        // 选择文件的按钮。可选。
        // 内部根据当前运行是创建，可能是input元素，也可能是flash.
        pick: '#picker',

        // 不压缩image, 默认如果是jpeg，文件上传前会压缩一把再上传！
        resize: false,
        accept: {
            title: 'Excel',
            extensions: 'xls,xlsx,xlsm,xlt,xlt',
            mimeTypes: 'application/vnd.ms-excel'
        }
    });
    // 当有文件被添加进队列的时候
    uploader.on( 'fileQueued', function( file ) {
        var $list = $("#thelist");
        $list.append( '<div id="' + file.id + '" class="item">' +
            '<h4 class="info">' + file.name + '</h4>' +
            '<p class="state">等待上传...</p>' +
            '</div>' );
    });
    // 文件上传过程中创建进度条实时显示。
    uploader.on( 'uploadProgress', function( file, percentage ) {
        var $li = $( '#'+file.id ),
            $percent = $li.find('.progress .progress-bar');

        // 避免重复创建
        if ( !$percent.length ) {
            $percent = $('<div class="progress progress-striped active">' +
                '<div class="progress-bar" role="progressbar" style="width: 0%">' +
                '</div>' +
                '</div>').appendTo( $li ).find('.progress-bar');
        }

        $li.find('p.state').text('上传中');

        $percent.css( 'width', percentage * 100 + '%' );
    });
    uploader.on( 'uploadSuccess', function( file) {
        $( '#'+file.id ).find('p.state').text('已上传');
        window.location.href="http://192.168.25.38:8096/user";


    });

    uploader.on( 'uploadError', function( file ) {
        $( '#'+file.id ).find('p.state').text('上传出错');
    });

    uploader.on( 'uploadComplete', function( file ) {
        $( '#'+file.id ).find('.progress').fadeOut();
    });

</script>

</body>
</html>
